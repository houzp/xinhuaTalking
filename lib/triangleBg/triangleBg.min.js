/**
 * Copyright (c) 2000 - 2016 XINHUANET.com All Rights Reserved.
 * xinhua-talking v0.0.23
 * @time 2016-12-30-19.09.28
 */
$(function(){var a=$("#triangleBg"),b=$("#triangleBg-anitOut");document.createElement("canvas").getContext?$.getScript("/lib/triangleBg/cav.min.js",function(){function c(){d(),f(),g(),h(),m(),i(C.offsetWidth,C.offsetHeight),j()}function d(){u=new CAV.CanvasRenderer,e(y.renderer)}function e(a){switch(p&&D.removeChild(p.element),a){case x:p=u}p.setSize(C.offsetWidth,C.offsetHeight),D.appendChild(p.element)}function f(){q=new CAV.Scene}function g(){q.remove(r),p.clear(),s=new CAV.Plane(v.width*p.width,v.height*p.height,v.segments,v.slices),t=new CAV.Material(v.ambient,v.diffuse),r=new CAV.Mesh(s,t),q.add(r);var a,b;for(a=s.vertices.length-1;a>=0;a--)b=s.vertices[a],b.anchor=CAV.Vector3.clone(b.position),b.step=CAV.Vector3.create(Math.randomInRange(.2,1),Math.randomInRange(.2,1),Math.randomInRange(.2,1)),b.time=Math.randomInRange(0,Math.PIM2)}function h(){var a,b;for(a=q.lights.length-1;a>=0;a--)b=q.lights[a],q.remove(b);for(p.clear(),a=0;a<w.count;a++)b=new CAV.Light(w.ambient,w.diffuse),b.ambientHex=b.ambient.format(),b.diffuseHex=b.diffuse.format(),q.add(b),b.mass=Math.randomInRange(.5,1),b.velocity=CAV.Vector3.create(),b.acceleration=CAV.Vector3.create(),b.force=CAV.Vector3.create()}function i(a,b){p.setSize(a,b),CAV.Vector3.set(A,p.halfWidth,p.halfHeight),g()}function j(){o=Date.now()-z,k(),l(),requestAnimationFrame(j)}function k(){var a,b,c,d,e,f,g,h=v.depth/2;for(CAV.Vector3.copy(w.bounds,A),CAV.Vector3.multiplyScalar(w.bounds,w.xyScalar),CAV.Vector3.setZ(B,w.zOffset),d=q.lights.length-1;d>=0;d--){e=q.lights[d],CAV.Vector3.setZ(e.position,w.zOffset);var i=Math.clamp(CAV.Vector3.distanceSquared(e.position,B),w.minDistance,w.maxDistance),j=w.gravity*e.mass/i;CAV.Vector3.subtractVectors(e.force,B,e.position),CAV.Vector3.normalise(e.force),CAV.Vector3.multiplyScalar(e.force,j),CAV.Vector3.set(e.acceleration),CAV.Vector3.add(e.acceleration,e.force),CAV.Vector3.add(e.velocity,e.acceleration),CAV.Vector3.multiplyScalar(e.velocity,w.dampening),CAV.Vector3.limit(e.velocity,w.minLimit,w.maxLimit),CAV.Vector3.add(e.position,e.velocity)}for(f=s.vertices.length-1;f>=0;f--)g=s.vertices[f],a=Math.sin(g.time+g.step[0]*o*v.speed),b=Math.cos(g.time+g.step[1]*o*v.speed),c=Math.sin(g.time+g.step[2]*o*v.speed),CAV.Vector3.set(g.position,v.xRange*s.segmentWidth*a,v.yRange*s.sliceHeight*b,v.zRange*h*c-h),CAV.Vector3.add(g.position,g.anchor);s.dirty=!0}function l(){p.render(q)}function m(){window.addEventListener("resize",n)}function n(a){i(C.offsetWidth,C.offsetHeight),l()}var o,p,q,r,s,t,u,v={width:1,height:1,depth:40,segments:5,xRange:.5,yRange:.2,ambient:"#505050",diffuse:"#FFFFFF",speed:3e-4},w={count:2,xyScalar:1,zOffset:100,ambient:"#FFFFFF",diffuse:"#FFFFFF",speed:.001,gravity:1200,dampening:.95,minLimit:10,maxLimit:1,minDistance:20,maxDistance:400,autopilot:!1,draw:!1,bounds:CAV.Vector3.create(),step:CAV.Vector3.create(Math.randomInRange(.2,1),Math.randomInRange(.2,1),Math.randomInRange(.2,1))},x="canvas",y={renderer:x},z=Date.now(),A=CAV.Vector3.create(),B=CAV.Vector3.create(),C=a[0],D=b[0];c()}):a.remove()});